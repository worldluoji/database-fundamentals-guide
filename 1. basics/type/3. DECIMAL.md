# DECIMAL
DECIMAL从MySQL 5.1引入，列的声明语法是DECIMAL(M,D)。NUMERIC与DECIMAL同义，如果字段类型定义为NUMERIC，则将自动转成DECIMAL。

## 范围
对于声明语法DECIMAL(M,D)，自变量的值范围如下：
- M是最大位数（精度），范围是1到65。可不指定，默认值是10。
- D是小数点右边的位数（小数位）。范围是0到30，并且不能大于M，可不指定，默认值是0。

## 例子
例如字段 salary DECIMAL(5,2)，能够存储具有五位数字和两位小数的任何值，因此可以存储在salary列中的值的范围是从-999.99到999.99。

---

## DECIMAL与DOUBLE、FLOAT的区别 

在MySQL中选择数值数据类型（`DECIMAL`、`FLOAT`、`DOUBLE`）需综合考虑**精度需求、存储效率、计算性能和应用场景**。以下是详细对比和选择建议：

---

### 📊 **1. 数据类型对比**
| **特性**         | **DECIMAL**                                | **FLOAT**                                  | **DOUBLE**                                 |
|------------------|--------------------------------------------|--------------------------------------------|--------------------------------------------|
| **精度**         | 精确小数（固定小数点），最多65位数字（小数点后30位） | 单精度浮点数，约7位有效数字      | 双精度浮点数，约15位有效数字    |
| **存储空间**     | 变长（每9位数字占4字节）                | 固定4字节                          | 固定8字节                          |
| **精度误差**     | **无**（精确存储）              | **有**（二进制近似导致舍入误差） | **有**（误差小于FLOAT）       |
| **适用场景**     | 财务金额、高精度统计、税务计算   | 科学测量、非关键数据（可容忍误差）   | 工程计算、范围较大的非精确数据      |
| **计算性能**     | 较慢（需精确计算）                  | 较快（硬件优化）                    | 较快（硬件优化）                   |
| **范围**         | 受限于指定精度（如`DECIMAL(10,2)`）     | 极大（±3.4E38）                   | 极大（±1.8E308）                  |

---

### ⚖️ **2. 选择策略**
#### **✅ 优先选择 DECIMAL 的场景**
- **要求绝对精确**：如金融金额（0.1+0.2必须等于0.3）、百分比、累计统计。
- **高精度计算**：涉及复杂函数（如`AVG()`、`SUM()`）且需避免误差放大时。
- **合规性要求**：审计、财务报告等场景需数据完全一致。

#### **⛔ 可考虑 FLOAT/DOUBLE 的场景**
- **科学/工程数据**：如温度、物理测量（允许微小误差）。
- **大范围数值**：需存储极大或极小数（如天文数字）。
- **存储敏感型应用**：海量数据且精度要求低时，节省空间（DOUBLE比DECIMAL更紧凑）。

---

### ⚠️ **3. 关键注意事项**
1. **浮点数的精度陷阱**  
   - `FLOAT/DOUBLE` 因二进制存储无法精确表示某些十进制小数（如0.1），导致累加误差（例：0.1+0.2≠0.3）。
   - **解决方案**：若必须用浮点数，用`ROUND()`函数四舍五入结果。

2. **DECIMAL 的配置建议**  
   - 显式定义精度（如`DECIMAL(10,2)`），避免默认值导致整数截断。
   - 过高的精度（如`DECIMAL(30,10)`）会显著增加存储和计算开销。

3. **计算优化**  
   - 频繁计算的字段（如电商订单总价）用`DECIMAL`，避免浮点误差累积。
   - 非关键指标（如用户评分）可用`FLOAT`以提升性能。

---

### 📝 **4. 应用场景示例**
| **场景**                | **推荐类型** | **理由**                                                                 |
|-------------------------|--------------|--------------------------------------------------------------------------|
| 银行账户余额            | `DECIMAL`    | 金额需精确到分，避免舍入误差                                    |
| 地理坐标（经纬度）      | `DOUBLE`     | 范围大且允许微小误差                                                |
| 传感器数据（温度）      | `FLOAT`      | 7位精度足够，节省存储                                          |
| 统计报表（平均值）      | `DECIMAL`    | 确保多次计算后结果一致                                          |
| 科学模型（粒子速度）    | `DOUBLE`     | 需要高范围数值和适度精度                                       |

---

### 💎 **总结**
- **`DECIMAL`**：**绝对优先**于对精度敏感的领域（如金融、统计），牺牲存储换取可靠性。
- **`FLOAT/DOUBLE`**：仅用于可容忍误差的场景（如科学计算），或存储空间受限时。  
**决策流程图**：  
`需要绝对精确？ → 是 → DECIMAL`  
`否 → 数值范围极大或存储敏感？ → 是 → DOUBLE/FLOAT`